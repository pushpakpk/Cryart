# ğŸ“¹ OpenCV Week 2 - Multiâ€‘Stream RTSP Viewer with Motion and Camera Compromise Detection

This project is the official submission for **Week 2** of the OpenCV realâ€‘time streaming and processing challenge.  
The goal is to build a system that displays **four realâ€‘time video streams** (simulated RTSP feeds), detects motion, and identifies whether the camera feed is blurred, covered, or compromised.
---

## ğŸ“Œ Project Description

This application mimics a **realâ€‘time CCTV system** that:
- Streams video from **four different cameras** in parallel  
- Detects **motion** in each camera using background subtraction  
- Detects **tampering** (blurred, covered, or laser interference) using image analysis  
- Displays the 4 video streams in a **2Ã—2 grid** window  
- Shows alerts like **â€œMotion Detectedâ€** or **â€œCamera Compromisedâ€** as overlay text  

This system can be easily adapted for **real RTSP cameras**, surveillance systems, or home security.
---

## ğŸ—‚ï¸ Project Structure

opencv-week2/
â”œâ”€â”€ code/
â”‚ â””â”€â”€ multi_stream_viewer.py # Main implementation file
â”œâ”€â”€ report/
â”‚ â””â”€â”€ week2_report.md # Detailed explanation and findings
â”œâ”€â”€ diagrams/
â”‚ â””â”€â”€ screenshot_output.png # Screenshot of the 2Ã—2 viewer
â””â”€â”€ README.md # You are here


---

## ğŸ”§ Requirements

You need Python and OpenCV. Install dependencies using pip:

```bash
pip install opencv-python numpy

---

## ğŸ› ï¸ How to Run

### ğŸ” Stepâ€‘byâ€‘Step Instructions

1. **Clone the Repository** or download ZIP:

```bash
git clone https://github.com/<your-username>/opencv-week2.git
cd opencv-week2/code

---

## ğŸ” Features Explained

### ğŸ¥ 1. Multiâ€‘Stream RTSP Viewer (4 Cameras)

- Uses **Python threading** to fetch frames from 4 streams concurrently.  
- Prevents UI blocking or lag.  
- Automatically loops `.mp4` test streams or attempts reconnection for RTSP.

### ğŸ”„ 2. Realâ€‘Time Motion Detection

- Utilizes `cv2.createBackgroundSubtractorMOG2` for motion detection.  
- If movement is detected, draws a white rectangle with **â€œMotion Detectedâ€** in black text.

### ğŸ›‘ 3. Camera Tamper Detection

Checks for compromised video feed in two ways:

#### a. **Blur Detection**  
- Uses the Laplacian variance metric.  
- If sharpness (variance) is below a threshold (e.g., 100), the frame is considered blurred.

#### b. **Cover / Laser / Overexposure Detection**  
- Uses the grayscale histogram.  
- If 95% or more of pixels are the same value (uniform distribution), then it is considered covered or overexposed.

If compromise is detected, draws a red rectangle with **â€œCamera Compromisedâ€** overlay.

### ğŸ§± 4. 2Ã—2 Video Grid Display

- Resizes all frames to the same size (e.g., 640Ã—480).  
- Combines them into a grid using `np.hstack()` and `np.vstack()`.  
- Maintains alignment and consistent layout.

---

## ğŸ–¼ï¸ Example Output Screenshot

Hereâ€™s what your viewer will look like:

> ğŸ”² Topâ€‘left, Topâ€‘right, Bottomâ€‘left, Bottomâ€‘right  
> âœ… Motion detected or compromise warnings may appear overlayed.

![Output Screenshot](diagrams/screenshot_output.png)


---

## ğŸ§¾ Summary of Methods Used

| Task | Method / Technique |
|------|--------------------|
| Multiâ€‘Stream Handling | `threading.Thread`, threadâ€‘safe capture |
| Motion Detection | `cv2.createBackgroundSubtractorMOG2` + thresholding |
| Blur Detection | `cv2.Laplacian()` variance |
| Cover Detection | Histogram analysis via `cv2.calcHist()` |
| Video Display | `cv2.resize()`, `np.hstack()`, `np.vstack()` |
| Overlay Text & Boxes | `cv2.putText()`, `cv2.rectangle()` |

---

## ğŸ§  Learnings & Insights

- RTSP / video streams can be **unstable**; reconnection logic is important.  
- Motion detection may have **false positives**, so you need to **tune thresholds**.  
- Tamper detection (blur, cover) is essential in surveillance setups.  
- Using multithreading with OpenCV is effective for handling multiple streams in real time.

---

## ğŸ§° Troubleshooting Guide

| Problem | Likely Cause | Solution |
|--------|----------------|----------|
| Only 2 out of 4 videos show | URLs invalid or stream failing | Check URL or internet, enable logs |
| One window black or blank | That stream failed reading frames | Visual placeholder is shown for diagnostics |
| Motion always triggered (false positive) | Too low threshold | Increase motion threshold or filter noise |
| Frequent â€œCamera Compromisedâ€ alerts | Too strict thresholds | Relax blur/histogram thresholds or conditions |

---




